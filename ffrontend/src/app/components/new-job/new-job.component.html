<app-navbar [title]="'Create New Job'"></app-navbar>

<div class="profile-container">
  <div class="cards-container">
    <div class="new-job-container">
      <h2 class="form-title">Create New Job</h2>

      <form [formGroup]="jobForm">
        <div class="form-group" [class.loading]="isLoadingForm">
          <label for="cim">Job Title</label>
          <input id="cim" type="text" formControlName="cim">
          <div class="error-message" *ngIf="showError('cim')">
            {{ getErrorMessage('cim') }}
          </div>
        </div>

        <div class="form-group" [class.loading]="isLoadingForm">
          <label for="leiras">Description</label>
          <textarea id="leiras" formControlName="leiras"></textarea>
          <div class="error-message" *ngIf="showError('leiras')">
            {{ getErrorMessage('leiras') }}
          </div>
        </div>

        <div class="form-group" [class.loading]="isLoadingForm">
          <label for="munkarend">Work Schedule</label>
          <select id="munkarend" formControlName="munkarend">
            <option value="">Select schedule</option>
            <option *ngFor="let option of workScheduleOptions" [value]="option.value">
              {{option.label}}
            </option>
          </select>
          <div class="error-message" *ngIf="showError('munkarend')">
            {{ getErrorMessage('munkarend') }}
          </div>
        </div>

        <div class="form-group" [class.loading]="isLoadingForm">
          <label for="rovidleiras">Short Description</label>
          <input id="rovidleiras" type="text" formControlName="rovidleiras">
          <div class="error-message" *ngIf="showError('rovidleiras')">
            {{ getErrorMessage('rovidleiras') }}
          </div>
        </div>

        <div class="form-group" [class.loading]="isLoadingForm">
          <label for="telepely">Location</label>
          <input id="telepely" type="text" formControlName="telepely">
          <div class="error-message" *ngIf="showError('telepely')">
            {{ getErrorMessage('telepely') }}
          </div>
        </div>

        <div class="form-group" [class.loading]="isLoadingForm">
          <label for="kitoltesihatarido">Deadline</label>
          <input id="kitoltesihatarido" 
                 type="date" 
                 formControlName="kitoltesihatarido"
                 [min]="getFormattedDate()">
          <div class="error-message" *ngIf="showError('kitoltesihatarido')">
            {{ getErrorMessage('kitoltesihatarido') }}
          </div>
        </div>

        <button class="submit-button" 
                [class.loading]="isSubmitting"
                (click)="onSubmit()"
                [disabled]="isSubmitting || isLoadingForm">
          {{ isSubmitting ? '' : 'Create Job' }}
        </button>
      </form>
    </div>

    <div class="turns-card" [class.loading]="isLoadingTurns">
      <h3 class="turns-header">Turns</h3>
      <div class="turn-options">
        <select class="turn-select" [(ngModel)]="selectedTurn">
          <option value="">Select Turn Type</option>
          <option *ngFor="let type of turnTypes" [value]="type">{{type}}</option>
        </select>
        <button class="add-turn-button" (click)="addNewTurn()">Add</button>
      </div>
      <div class="turns-list">
        <div class="turn-item" *ngFor="let turn of turns; let i = index">
          <span>{{ turn.name }}</span>
          <button class="edit-turn-button" (click)="editTurn(turn)">Edit</button>
        </div>
      </div>
    </div>
  </div>
</div>